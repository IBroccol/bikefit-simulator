<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å–∞–¥–∫–∏ - BikeFit</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.15/paper-full.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        .canvas-page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .canvas-layout {
            flex: 1;
            display: flex;
            gap: var(--spacing-4);
            min-height: 0;
            overflow: hidden;
        }
        
        .canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: var(--spacing-6);
            background: var(--bg-secondary);
            min-width: 0;
        }
        
        .canvas-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-4);
            min-height: 0;
        }
        
        #myCanvas {
            flex: 1;
            width: 100%;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            background: var(--bg-canvas);
            box-shadow: var(--shadow-sm);
            min-height: 400px;
        }
        
        .canvas-controls {
            display: flex;
            justify-content: center;
            gap: var(--spacing-2);
            padding: var(--spacing-2) 0;
            flex-shrink: 0;
        }
        
        /* Responsive breakpoints */
        @media (max-width: 1200px) {
            .canvas-layout {
                flex-direction: column;
                overflow-y: auto;
                overflow-x: hidden;
            }
            
            .sidebar {
                width: 100%;
                max-width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                min-height: auto;
                max-height: none;
            }
            
            .canvas-container {
                padding: var(--spacing-4);
                flex: 0 0 auto;
            }
            
            .canvas-wrapper {
                flex: 0 0 auto;
            }
            
            #myCanvas {
                flex: none;
                min-height: 350px;
                height: 450px;
                max-height: 550px;
            }
        }
        
        @media (max-width: 767px) {
            .canvas-container {
                padding: var(--spacing-3);
            }
            
            #myCanvas {
                min-height: 300px;
                height: 350px;
                max-height: 400px;
            }
            
            .sidebar {
                padding: var(--spacing-4);
            }
        }
        
        @media (max-width: 479px) {
            #myCanvas {
                min-height: 250px;
                height: 300px;
                max-height: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="canvas-page">
        <header>
            <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å–∞–¥–∫–∏</h1>
            <button class="btn btn-primary" onclick="window.location.href='/dashboard'">‚Üê –í –º–µ–Ω—é</button>
        </header>

        <div class="canvas-layout">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <aside class="sidebar">
                <div class="block">
                    <h3>–í–µ–ª–æ—Å–∏–ø–µ–¥</h3>
                    <div class="input-group">
                        <label for="bikeSearch">–ü–æ–∏—Å–∫ –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞</label>
                        <input type="text" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥" id="bikeSearch" readonly>
                        <div id="bikeList" class="autocomplete-list"></div>
                    </div>
                    <div class="input-group">
                        <label for="sizeSelect">–†–∞–∑–º–µ—Ä</label>
                        <select id="sizeSelect">
                            <option>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä</option>
                        </select>
                    </div>
                </div>
            </aside>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —Å –∫–∞–Ω–≤–∞—Å–æ–º -->
            <main class="canvas-container">
                <div class="canvas-wrapper">
                    <div class="fit-hints" style="background: var(--bg-primary); padding: var(--spacing-3); border-radius: var(--radius-lg); margin-bottom: var(--spacing-3); border: 1px solid var(--border-color);">
                        <h4 style="margin: 0 0 var(--spacing-2) 0; color: var(--text-primary); font-size: 0.9rem;">üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ—Å–∞–¥–∫–µ:</h4>
                        <ul style="margin: 0; padding-left: var(--spacing-4); color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">
                            <li>–ü—Ä–∏ –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –ø–µ–¥–∞–ª–∏ –Ω–∞ <strong>3 —á–∞—Å–∞</strong> (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –≤–ø–µ—Ä—ë–¥) –∫–æ–ª–µ–Ω–æ –¥–æ–ª–∂–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è <strong>–Ω–∞–¥ –æ—Å—å—é –ø–µ–¥–∞–ª–∏</strong></li>
                            <li>–ü—Ä–∏ –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –ø–µ–¥–∞–ª–∏ –Ω–∞ <strong>6 —á–∞—Å–æ–≤</strong> (–≤–Ω–∏–∑—É) —É–≥–æ–ª –≤ –∫–æ–ª–µ–Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ <strong>145¬∞</strong></li>
                        </ul>
                    </div>
                    <canvas id="myCanvas"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-primary" id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                </div>
            </main>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <aside class="sidebar">
                <div class="block">
                    <h3>–ú–æ–∏ –ø–æ—Å–∞–¥–∫–∏</h3>
                    <div class="input-group">
                        <label for="fitSearch">–í—ã–±—Ä–∞—Ç—å –ø–æ—Å–∞–¥–∫—É</label>
                        <input type="text" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–∞–¥–∫—É" id="fitSearch" readonly>
                        <div id="fitList" class="autocomplete-list"></div>
                    </div>
                    <button class="btn btn-danger btn-block" id="deleteBtn" style="display: none;">–£–¥–∞–ª–∏—Ç—å –ø–æ—Å–∞–¥–∫—É</button>
                </div>

                <div class="block">
                    <h3>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="input-group">
                        <label for="fitInput">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å–∞–¥–∫–∏</label>
                        <input type="text" id="fitInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
                        <button class="btn btn-success btn-block" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    
    <script>
        window.element_ids = {
            "canvas": "myCanvas",
            "bikeSearch": "bikeSearch",
            "bikeList": "bikeList",
            "sizeSelect": "sizeSelect",
            "fitSearch": "fitSearch",
            "fitList": "fitList",
            "fitInput": "fitInput",
            "saveButton": "saveBtn",
            "resetButton": "resetBtn",
            "deleteButton": "deleteBtn"
        }
    </script>
    <script type="module" src="{{ url_for('static', filename='js/theme-toggle.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/canvas.js') }}"></script>
</body>
</html>